# –í —ç—Ç–æ–º –º–æ–¥—É–ª–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∑–∞–¥–∞—á–∏ 12-–≥–æ –¥–Ω—è
from aiogram.types import Message
from aiogram.dispatcher import FSMContext

from keyboards.default.menu import menu, pool
from loader import dp
from states.states import Start, Task12
from utils.db_api.db_commands import db_save_task


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ 1–≥–æ –æ—Ç–≤–µ—Ç–∞ (–ù–∞—á–∞—Ç—å) –∫ –∑–∞–¥–∞—á–∫–µ "–Ω–∞ –ø—Ä–æ–∫–∞—á–∫—É" 12-–≥–æ –¥–Ω—è
@dp.message_handler(state=Task12.Answer_12_01)
async def answer_12_01(message: Message, state: FSMContext):
    data = await state.get_data()
    name_user = data.get("name_user")
    s = message.text
    if s == "–í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–µ–π—á–∞—Å!":
        video = open("./VIDEO/–ü–æ—Ö–æ–¥–∫–∞.mp4", "rb")
        await message.answer_video(video)
        await message.answer("–ü–æ—Å–º–æ—Ç—Ä–∏, –∫–∞–∫ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è —ç–º–æ—Ü–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ö–æ–¥–∫–∏ (–æ–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –≤ –∫–æ–Ω—Ü"
                             "–µ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ª–∞ –õ—é–¥–º–∏–ª—ã –ü—Ä–æ–∫–æ—Ñ—å–µ–≤–Ω—ã –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö).\n–ù–∞–ø–∏—à–∏ (–≤ —Å–≤–æ–±"
                             "–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ), –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—Ä—Ç—Ä–µ—Ç —ç–º–æ—Ü–∏–∏ ¬´–ò–Ω—Ç–µ—Ä–µ—Å¬ª. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å —Ç–µ–ª–æ–º (–∂–µ—Å—Ç—ã, –ø–æ"
                             "–∑–∞, –º–∏–º–∏–∫–∞), —á—Ç–æ–±—ã –≤—ã–∑–≤–∞—Ç—å —É —Å–µ–±—è —ç—Ç—É —ç–º–æ—Ü–∏—é?", reply_markup=pool)
    elif s == "–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ!":
        await message.answer("–ê–≥–∞, –ø–æ–Ω–∏–º–∞—é! –ù–æ —É —Ç–µ–±—è –µ—Å—Ç—å —à–∞–Ω—Å –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç—Ç–æ–π –∑–∞–¥–∞—á–∫–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è.",
                             reply_markup=menu)
        await Start.Wait.set()
        return
    else:
        await message.answer("{0}, –∫–ª–∏–∫–Ω–∏ –Ω–∞ —Å–ª—É–∂–µ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–µ–π—á–∞—Å!¬ª –ø–æ–¥ —Å—Ç—Ä–æ–∫–æ–π –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ \n"
                             "–∏–ª–∏ –Ω–∞ ¬´–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ!¬ª".format(name_user))
        return
    await Task12.next()


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ 2–≥–æ –æ—Ç–≤–µ—Ç–∞ (–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä) –∫ –∑–∞–¥–∞—á–∫–µ "–Ω–∞ –ø—Ä–æ–∫–∞—á–∫—É" 12-–≥–æ –¥–Ω—è
@dp.message_handler(state=Task12.Answer_12_02)
async def answer_12_02(message: Message):
    s = message.text[:100]  # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ñ–∞–Ω—Ç–∞–∑–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 100 —Å–∏–º–≤–æ–ª–∞–º–∏
    await db_save_task(message.from_user.id, 12, s)
    await message.answer("–°–ø–∞—Å–∏–±–æ! –ê —á—Ç–æ–±—ã —Ç–µ–±–µ –±—ã–ª–æ –ø—Ä–æ—â–µ, –ø–æ–¥–µ–ª—é—Å—å —Å–≤–æ–∏–º–∏ –Ω–∞—Ä–∞–±–æ—Ç–∫–∞–º–∏ –æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞—Ö –±–∞–∑–æ–≤—ã—Ö —ç–º–æ—Ü–∏–π:\n"
                         "https://disk.yandex.ru/i/rFZ4hFMNFWQRgg")
    await message.answer("–ö–∞–∫–∏–µ –µ—â–µ —Å–ø–æ—Å–æ–±—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–º–æ—Ü–∏—è–º–∏ —á–µ—Ä–µ–∑ —Ç–µ–ª–æ —Ç—ã –∑–Ω–∞–µ—à—å? ( –Ω–∞–ø–∏—à–∏ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ)")
    await Task12.next()


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ 3–≥–æ –æ—Ç–≤–µ—Ç–∞ (–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä) –∫ –∑–∞–¥–∞—á–∫–µ "–Ω–∞ –ø—Ä–æ–∫–∞—á–∫—É" 12-–≥–æ –¥–Ω—è
@dp.message_handler(state=Task12.Answer_12_03)
async def answer_12_03(message: Message):
    s = message.text[:100]  # –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ñ–∞–Ω—Ç–∞–∑–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 100 —Å–∏–º–≤–æ–ª–∞–º–∏
    await db_save_task(message.from_user.id, 12, s)
    await message.answer("–í–æ—Å—Å–æ–∑–¥–∞–Ω–∏–µ ¬´–ø–æ—Ä—Ç—Ä–µ—Ç–∞¬ª —ç–º–æ—Ü–∏–∏ ‚Äì —ç—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤. –ï—â–µ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —ç–º–æ—Ü–∏—è–º–∏ —á–µ—Ä"
                         "–µ–∑ –¥—ã—Ö–∞–Ω–∏–µ, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –∏ –¥–∞–∂–µ –ø—Ä–∏—è—Ç–Ω—ã–µ –∑–∞–ø–∞—Ö–∏/–≤–∫—É—Å—ã/—Ç–∞–∫—Ç–∏–ª—å–Ω—ã–µ –æ—â—É—â–µ–Ω–∏—è. –≠—Ç–æ –≤—Å–µ "
                         "–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞—à–µ —Ç–µ–ª–æ –Ω–∞ –Ω—É–∂–Ω—É—é —ç–º–æ—Ü–∏—é. –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ —Å–ø–æ—Å–æ–±—ã.")
    await message.answer("–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ üòä", reply_markup=menu)
    await Start.Wait.set()
